# HTTP

HTTP란 Hyper Text Transfer Protocol의 약자로, 인터넷에서 데이터를 주고받기 위해 사용되는 프로토콜이다. 클라이언트와 서버 간의 통신을 담당한다.

HTTP는 요청과 응답의 형태로 구성된다. 클라이언트는 HTTP 요청 메시지를 서버에 전송하고, 서버는 응답 메시지를 클라이언트에게 전송한다. 

### HTTP의 특징
- 무상태성 (Stateless)
    - HTTP는 상태를 유지하지 않는다. 각각의 요청은 독립적이며, 이전 요청의 연결이나 상태를 기억하지 않는다.
- 비연결성 (Connectionless)
    - HTTP는 요청과 응답이 한 번 이루어지면 연결이 종료된다.
- Request-Response 모델
    - 클라이언트가 요청을 보내고 서버가 응답을 반환하는 형태의 모델을 따른다.
- URI
    - 리소스를 식별하기 위해 URI를 사용한다.

<br/>

# HTTP의 진화

## HTTP/0.9 - One-line 프로토콜
HTTP의 초기 버전에는 번호가 없었고, 이 후의 버전과 구별하기 위해 0.9로 불리게 된다. 초기 버전은 굉장히 단순하다. 요청은 단일 라인으로 구성되며 사용 가능한 메서드는 `GET`이 유일했다. 
```http
GET /page.html
```
응답 또한 파일 내용 자체로 구성되는 단순한 구조이다.
```html
<html>hi http/0.9</html>
```
예시 에서 HTTP 헤더가 없는 것을 볼 수 있다. 즉, 다른 유형의 문서는 전송될 수 없음을 의미한다. status code도 존재하지 않는다.

## HTTP/1.0 - 확장성 만들기
HTTP/1.0은 웹 브라우저와 웹 서버 간의 기본적인 데이터 전송을 처리하는데 중점을 둔다.

### HTTP/1.0 특징

- **비 지속적 연결**: 요청과 응답 후에 연결을 닫는다. 클라이언트는 각각의 요청마다 새로운 연결을 맺어야 한다.
- **요청 메시지의 단순성**: 요청 메서드, 헤더, 바디 등의 정보가 포함된다.
- **status code**: 요청의 성공, 실패, 리다이렉션 등의 상태를 나타낸다.
- **캐싱**: 캐싱 기능을 지원하여 동일한 요청에 대한 응답을 반복적으로 전송하지 않고 캐시 데이터를 사용할 수 있다.
- **보안**: 보안 기능에 대한 내장 지원은 제한적이다. 직접 구현해야 한다.

## HTTP/1.1 - 표준 프로토콜
HTTP/1.1은 HTTP 프로토콜의 주요 업데이트 버전이다. HTTP/1.0의 단점을 보완하고, 성능 확장성을 개선하기 위해 다양한 기능을 도입한다.

### HTTP/1.1 특징

- **`Keep-Alive`**: Keep-Alive 연결을 지원하여 한번의 TCP 연결로 여러 요청과 응답을 처리한다.
- **지속적 연결**: 한 번의 연결로 여러 요청과 응답을 처리한다. 연결 설정/해제에 따른 오버헤드를 줄인다.
- **Pipelining**: 여러 요청을 동시에 전송하고 응답을 순차적으로 받을 수 있다.
- **청크 전송 인코딩**: 대용량 데이터를 작은 청크로 분할하여 전송할 수 있다.
- **가상 호스팅**: 하나의 웹 서버에서 여러 개의 도메인을 호스팅할 수 있는 가상 호스팅 기능을 지원한다. 동일한 서버에서 여러 웹 사이트를 운영할 수 있다.
- **압축 전송**: 압축 전송을 지원하여 서버에서 클라이언트로 전송되는 데이터를 압축하여 전송할 수 있다.
- **Range 요청**: 클라이언트가 원하는 범위의 데이터만 요청할 수 있다.
- **호스트 헤더 필드**: 하나의 서버가 여러 개의 도메인을 호스팅할 수 있도록 지원한다.
- **추가적인 요청 메서드**: `GET`, `POST` 외에도 `PUT`, `DELETE`, `PATCH`, `OPTIONS`를 도입했다.


### HTTP/2 - 더 나은 성능을 위한 프로토콜
HTTP/1.1의 단점을 개선하고 성능을 향상시키기 위해 설계되었다.

> **HTTP/2 특징**

- **이진 프레임 형식**: 이진 프레임 형식을 사용하여 데이터를 전송한다. HTTP/1.1의 텍스트 기반 프로토콜보다 더 효율적으로 데이터를 인코딩하고 압축할 수 있다.
- **다중화와 스트림**: 단일 TCP 연결에서 여러 개의 동시 스트림을 지원한다.
- **헤더 압축**: 헤더 필드를 압축하여 데이터 전송량을 줄인다.
- **서버 푸시**: 서버가 클라이언트 요청에 대한 응답으로 추가적인 리소스를 미리 전송할 수 있다.
- **스트림 우선순위**: 중요한 리소스에 대한 전송을 우선적으로 처리할 수 있다.

### HTTP/3 - QUIC를 통한 HTTP
HTTP/3은 최신 버전의 HTTP 프로토콜로 기존의 TCP 대신에 Quick UDP Internet Connections 프로토콜을 사용한다. QUIC은 UDP를 기반으로 한 전송 계층 프로토콜로, 네트워크 요청을 보다 빠르고 안정적으로 만들기 위해 설계되었다.

> **HTTP/3 특징**
- **성능 개선**: QUIC 프로토콜은 다중화와 연결 상태의 유지를 통해 여러 개의 요청과 응답을 동시에 처리한다.
- **연결 설정 및 핸드쉐이크 감소**: QUIC는 특별한 초기 연결 설정과 핸드쉐이크 프로세스를 사용하여 연결을 빠르게 설정하고 유지한다.
- **강력한 보안**: 기본적으로 TLS 암호화를 사용하여 기밀성과 무결성을 보호한다.
- **이동성과 신뢰성**: 모바일과 같은 이동성이 높은 환셩에서도 빠른 설정과 연결 유지를 제공한다.

HTTP/3는 현재까지는 실험적인 단계이고, 일부에서만 지원되고 있다. TCP -> QUIC으로 프로토콜이 변경되어서 이전 버전의 HTTP와 호환되지 않는다. 그러나 HTTP/3의 장점과 성능 향상을 위해 더 많은 웹 서비스가 이를 채택하고 있다.


## Status Code
추가로, HTTP 요청 상태를 확인할 수 있는 코드를 살펴보자. 자주 쓰이는 것 위주로 정리 해 봤다.

### 1. 정보 전송, 임시 응답 (10X)
| code | 설명 |
|------|------|
| 100 | Continue (클라이언트로 부터 일부 요청을 받았고, 나머지 정보를 계속 요청함) |
| 101 | switching protocol (ex. http -> websocket 접속)|

### 2. 성공 (20X)
| code | 설명 |
|------|------|
| 200 | 요청이 성공적으로 수행됨 |
| 201 | Created (Put 메소드로 서버에 파일 생성됨) |
| 202 | Accpeted (서버가 명령을 수신함) |
| 203 | Non-authoritative information (서버가 클라이언트 요구 중 일부만 전송함)|
| 204 | No Content (요청 자체는 성공했지만 전송할 데이터가 없음, put, patch, delete에 해당)|

### 3. 리다이렉션 (30X)
| code | 설명 |
|------|------|
| 301 | Moved Permanently (요청한 리소스가 영구적으로 다른 URL로 이동됨) |
| 302 | Found (요청한 리소스가 임시로 다른 URL로 연결됨)|
| 304 | Not Modified (캐싱을 통해 클라이언트가 가지고 있는 데이터와 동일한 경우 새 데이터를 보내지 않음)|

### 4. 클라이언트 요청 에러 (40X)
| code | 설명 |
|------|------|
| 400 | Bad Request (클라이언트의 요청이 잘못됨) |
| 401 | Unauthorized (인가된 사용자가 아님) |
| 402 | Payment required (결제를 해야 리소스에 접근할 수 있음) |
| 403 | Forbidden (접근 금지, 관리자 페이지 접근 등을 차단함)|
| 404 | Not Found|
| 405 | Method Not allowed (허용되지 않는 http method 사용)|
| 407 | Proxy authentication required (프록시 인증이 요구된)|
| 408 | Request Timeout |
| 410 | Gone (영구적으로 사용 금지) |
| 412 | Precondition failed (클라이언트가 요청에 전제 조건을 설정했지만, 서버가 이를 만족 못함) |
| 414 | Request-URI too long|


### 5. 서버 에러 (50X)
| code | 설명 |
|------|------|
| 500 | Internal server error (내부 서버 오류) |
| 501 | Not Implemented (서버가 처리할 수 없음) |
| 503 | Service unavailable (일시적 과부하 또는 서버 유지 보수중) |
| 504 | Gateway timeout |
| 505 | HTTP version not supported (해당 http 버전 지원되지 않음) |


<br/>


[참고]
- [HTTP 란? (HTTP 특징 / HTTP 요청과 응답)](https://bruders.tistory.com/143)
- [mdx, http > http의 진화](https://developer.mozilla.org/ko/docs/Web/HTTP/Evolution_of_HTTP)
- [HTTP란 무엇인가?](https://velog.io/@ajm0718/HTTP%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)